<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.java.dao.FieldInfDao">
    <!--地址数据库字段和实体类对的映射关系-->
    <resultMap id="fieldInfMap" type="TblFieldInf">
    	<result column="TABLE_ID" property="tableId" jdbcType="INTEGER"/>
    	<result column="FIELD_ID" property="fieldId" jdbcType="INTEGER"/>
    	<result column="FIELD_NAME" property="fieldName" jdbcType="VARCHAR"/>
    	<result column="FIELD_NAME_CN" property="fieldNameCn" jdbcType="VARCHAR"/>
    	<result column="IS_SHOW" property="isShow" jdbcType="VARCHAR"/>
    </resultMap>
    
    <sql id="columns">
    	TABLE_ID,FIELD_ID,FIELD_NAME,FIELD_NAME_CN,IS_SHOW
    </sql>
    
    <select id="getFieldInf" resultMap="fieldInfMap" parameterType="com.java.entites.TblFieldInf">
    	SELECT 
    	<include refid="columns"/>
    	FROM TBL_FIELD_INF
    	<where>
    		<if test=" tableId !=null and tableId != '' ">
    			AND TABLE_ID = #{tableId}
    		</if>
    		
    		<if test=" fieldId !=null and fieldId != '' ">
    			AND FIELD_ID = #{fieldId}
    		</if>
    		
    		<if test=" fieldName !=null and fieldName != '' ">
    			AND FIELD_NAME = #{fieldName}
    		</if>
    		
    		<if test=" fieldNameCn !=null and fieldNameCn != '' ">
    			AND FIELD_NAME_CN = #{fieldNameCn}
    		</if>
    		
    		<if test=" isShow !=null and isShow != '' ">
    			AND IS_SHOW = #{isShow}
    		</if>
    		
    	</where>
    </select>
    
    
    <select id="getTableFieldInf" resultMap="fieldInfMap" parameterType="com.java.entites.TblFieldInf">
    	SELECT 
    	<include refid="columns"/>
    	FROM VIEW_TABLE_FIELD WHERE TABLE_NAME = #{tableName}
    </select>
    
</mapper>